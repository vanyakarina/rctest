<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Royalty Report Data</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="catalogue_registration.html">Catalogue Registration</a></li>
            <li><a href="works.html">Works</a></li>
            <li><a href="songwriters.html">Songwriters</a></li>
            <li><a href="royalty_calculator.html">Royalty Calculator</a></li>
            <li><a href="royalty_report.html">Royalty Report</a></li>
            <li><a href="royalty_report_data.html">Royalty Report Data</a></li>
        </ul>
    </nav>

    <h1>Royalty Report Data</h1>

    <label for="period-select">Select Period:</label>
    <select id="period-select" onchange="loadRoyaltyData()">
        <option value="">-- Select a period --</option>
        <!-- Add periods here, same as in royalty_report.html -->
        <!-- Example options -->
        <option value="Jan-Jun 2019">Jan-Jun 2019</option>
        <option value="Jul-Dec 2019">Jul-Dec 2019</option>
        <!-- Add more periods as necessary -->
    </select>

    <div id="royalty-breakdown">
        <h2>Royalty Breakdown</h2>
        <table id="breakdown-table">
            <thead>
                <tr>
                    <th>Song Title</th>
                    <th>Composer</th>
                    <th>Share (%)</th>
                    <th>Digital Royalty</th>
                    <th>Synch Royalty</th>
                    <th>Mechanical Royalty</th>
                    <th>Performance Royalty</th>
                    <th>Total Royalty</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be loaded here dynamically -->
            </tbody>
        </table>
    </div>

    <div id="total-royalties">
        <h2>Total Royalties by Songwriter</h2>
        <table id="total-royalties-table">
            <thead>
                <tr>
                    <th>Songwriter</th>
                    <th>Digital Royalty</th>
                    <th>Synch Royalty</th>
                    <th>Mechanical Royalty</th>
                    <th>Performance Royalty</th>
                    <th>Total Royalty</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be loaded here dynamically -->
            </tbody>
        </table>
    </div>

    <script src="script.js"></script>
    <script>
        function loadRoyaltyData() {
            const period = document.getElementById('period-select').value;
            if (!period) return;

            // Load the data for the selected period
            const data = JSON.parse(localStorage.getItem(`royalty_report_${period}`));
            if (!data) {
                alert('No data found for the selected period.');
                return;
            }

            // Load Royalty Breakdown
            const breakdownTable = document.getElementById('breakdown-table').getElementsByTagName('tbody')[0];
            breakdownTable.innerHTML = '';
            data.breakdown.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row.songTitle}</td>
                    <td>${row.composer}</td>
                    <td>${row.share}</td>
                    <td>${row.digitalRoyalty}</td>
                    <td>${row.synchRoyalty}</td>
                    <td>${row.mechanicalRoyalty}</td>
                    <td>${row.performanceRoyalty}</td>
                    <td>${row.totalRoyalty}</td>
                `;
                breakdownTable.appendChild(tr);
            });

            // Load Total Royalties by Songwriter
            const totalRoyaltiesTable = document.getElementById('total-royalties-table').getElementsByTagName('tbody')[0];
            totalRoyaltiesTable.innerHTML = '';
            data.totalRoyalties.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row.songwriter}</td>
                    <td>${row.digitalRoyalty}</td>
                    <td>${row.synchRoyalty}</td>
                    <td>${row.mechanicalRoyalty}</td>
                    <td>${row.performanceRoyalty}</td>
                    <td>${row.totalRoyalty}</td>
                `;
                totalRoyaltiesTable.appendChild(tr);
            });
        }
    </script>
</body>
</html>
