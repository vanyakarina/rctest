<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalogue Registration</title>
    <style>
        /* Your existing styles */
    </style>
</head>
<body>
    <nav>
        <!-- Your existing navigation -->
    </nav>

    <div class="container">
        <!-- Your existing form and table -->
        <div class="pagination">
            <button id="prevPage" onclick="changePage(-1)">Previous</button>
            <span id="pageInfo">Page 1</span>
            <button id="nextPage" onclick="changePage(1)">Next</button>
        </div>
    </div>

    <script>
        let catalogue = JSON.parse(localStorage.getItem('catalogue')) || [];
        let songwriters = JSON.parse(localStorage.getItem('songwriters')) || [];
        let editingIndex = -1; // Index of the item being edited
        let currentPage = 1;
        const entriesPerPage = 10;

        function addSongwriterInput() {
            // Your existing addSongwriterInput function
        }

        function removeSongwriterInput(button) {
            // Your existing removeSongwriterInput function
        }

        function submitCatalogue() {
            // Your existing submitCatalogue function
        }

        function updateCatalogueTable() {
            const tableBody = document.getElementById('catalogueTable').getElementsByTagName('tbody')[0];
            tableBody.innerHTML = '';

            // Calculate start and end index for the current page
            const startIndex = (currentPage - 1) * entriesPerPage;
            const endIndex = Math.min(startIndex + entriesPerPage, catalogue.length);

            for (let i = startIndex; i < endIndex; i++) {
                const entry = catalogue[i];
                const row = tableBody.insertRow();
                row.innerHTML = `
                    <td>${i + 1}</td>
                    <td>${entry.title}</td>
                    <td>${entry.releaseDate}</td>
                    <td>${entry.distributor}</td>
                    <td>${entry.isrc || 'N/A'}</td>
                    <td>${entry.singer}</td>
                    <td>${entry.songwriters.map(sw => `${sw.name} (${sw.share}%)`).join(', ')}</td>
                    <td>
                        <button onclick="editCatalogue(${i})">Edit</button>
                        <button onclick="deleteCatalogue(${i})">Delete</button>
                    </td>
                `;
            }

            document.getElementById('pageInfo').textContent = `Page ${currentPage}`;
            document.getElementById('prevPage').disabled = currentPage === 1;
            document.getElementById('nextPage').disabled = endIndex >= catalogue.length;
        }

        function editCatalogue(index) {
            // Your existing editCatalogue function
        }

        function deleteCatalogue(index) {
            // Your existing deleteCatalogue function
        }

        function searchCatalogue() {
            // Your existing searchCatalogue function
        }

        function changePage(offset) {
            const newPage = currentPage + offset;
            const totalPages = Math.ceil(catalogue.length / entriesPerPage);
            if (newPage > 0 && newPage <= totalPages) {
                currentPage = newPage;
                updateCatalogueTable();
            }
        }

        window.onload = function() {
            updateCatalogueTable();
        };
    </script>
</body>
</html>
